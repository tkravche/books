!function(){function e(e,o,t,n){Object.defineProperty(e,o,{get:t,set:n,enumerable:!0,configurable:!0})}function o(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},s=t.parcelRequire0688;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in a){var o=a[e];delete a[e];var t={id:e,exports:{}};return n[e]=t,o.call(t.exports,t,t.exports),t.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,o){a[e]=o},t.parcelRequire0688=s),s.register("iE7OH",(function(o,t){var n,a;e(o.exports,"register",(function(){return n}),(function(e){return n=e})),e(o.exports,"resolve",(function(){return a}),(function(e){return a=e}));var s={};n=function(e){for(var o=Object.keys(e),t=0;t<o.length;t++)s[o[t]]=e[o[t]]},a=function(e){var o=s[e];if(null==o)throw new Error("Could not resolve bundle with id "+e);return o}})),s.register("aNJCr",(function(o,t){var n;e(o.exports,"getBundleURL",(function(){return n}),(function(e){return n=e}));var a={};function s(e){return(""+e).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}n=function(e){var o=a[e];return o||(o=function(){try{throw new Error}catch(o){var e=(""+o.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(e)return s(e[2])}return"/"}(),a[e]=o),o}})),s("iE7OH").register(JSON.parse('{"EVgbq":"index.6dafbd1c.js","ei4R3":"amazon1.c9513f1c.png","6hscl":"amazon2.468bb970.png","bvZ8I":"amazon3.25420e04.png","cYITP":"apple1.99f5b86b.png","lqiqk":"apple2.ceabda8c.png","9Som1":"apple3.8096cc16.png","ijrEh":"bookshop1.579c7059.png","1jQa8":"bookshop2.b7dbaeb3.png","aaRVJ":"bookshop3.1927bef9.png","gwbLm":"sprite.3e83a086.svg","cIs3N":"index.0756cf94.js"}')),s("dcWCw"),s("4Nugj"),s("fJh0j");var r=s("dcWCw"),c=s("4Nugj");(0,r.getAllCategoriesList)().then((function(e){var o;o=e,c.refs.categoriesList.innerHTML=o.map((function(e){return'<li class="category-item" data-category="'.concat(e.list_name,'">\n    ').concat(e.list_name,"</li>")})).join("")}));r=s("dcWCw");var l=(c=s("4Nugj")).refs.bookshelfTitle;function i(e){c.refs.categoryBookshelf.innerHTML=function(e){return e.map((function(e){var o=e.list_name,t=e.books;return'\n    <li class="bookshelf-item">\n    <h3 class="bookshelf-category">'.concat(o,'</h3>\n    <ul class="bookshelf-books">').concat(t.map((function(e){var o=e._id,t=e.book_image,n=e.title,a=e.author;return'<li class="bookshelf-book" id="'.concat(o,'">\n                <div class="overlay-container">\n        <img src="').concat(t,'" alt="').concat(n,'" width="180"\n        height="256" data-img-id="').concat(o,'" loading="lazy" class="book-img">\n        <div class="overlay">\n    <div class="overlay-text">Quick view</div>\n  </div>\n  </div>\n        <div class="book-info"><p class="book-title">').concat(n,'</p>\n        <p class="book-author">').concat(a,"</p></div></li>")})).join(""),'</ul>\n    <button class="see-more-btn" data-category="').concat(o,'">See More</button>\n     </li>')})).join("")}(e)}function d(e){c.refs.categoryBookshelf.innerHTML=function(e){return e.map((function(e){return'<li class="bookshelf-book" id="'.concat(e._id,'" data-category="').concat(e.list_name,'">\n        <div class="overlay-container">\n<img src="').concat(e.book_image,'" alt="').concat(e.title,'" width="180"\nheight="256" data-img-id="').concat(e._id,'" loading="lazy" class="book-img">\n<div class="overlay">\n<div class="overlay-text">Quick view</div>\n</div>\n</div>\n<div class="book-info"><p class="book-title">').concat(e.title,'</p><p class="book-author">').concat(e.author,"</p></div></li>")})).join("")+'<div><button class="all-categories-btn">All Categories</button></div>'}(e),c.refs.categoryBookshelf.classList.add("clicked-category"),window.scrollTo({top:0,behavior:"smooth"})}function u(e){document.querySelector(".current").classList.remove("current"),document.querySelector('li[data-category="'.concat(e,'"]')).classList.add("current")}(0,r.getBestSellers)().then((function(e){i(e)})),c.refs.categoriesList.addEventListener("click",(function(e){if(e.target.classList.contains("category-item")){var o=e.target.dataset.category,t=o.split(" "),n=t.slice(0,t.length-1).join(" "),a=t.slice(t.length-1);(0,r.getBooksByCategory)(o).then((function(e){d(e),u(o),l.innerHTML='<span class="bookshelf-title">'.concat(n,'</span><span class="bookshelf-title-accent"> ').concat(a,"</span>"),window.scrollTo({top:0,behavior:"smooth"})}))}})),c.refs.categoryBookshelf.addEventListener("click",(function(e){if(e.target.classList.contains("see-more-btn")){var o=e.target.dataset.category,t=o.split(" "),n=t.slice(0,t.length-1).join(" "),a=t.slice(t.length-1);(0,r.getBooksByCategory)(o).then((function(e){d(e),u(o),l.innerHTML='<span class="bookshelf-title">'.concat(n,'</span><span class="bookshelf-title-accent"> ').concat(a,"</span>"),window.scrollTo({top:0,behavior:"smooth"})}))}})),c.refs.categoryBookshelf.addEventListener("click",(function(e){e.target.classList.contains("all-categories-btn")&&(0,r.getBestSellers)().then((function(e){i(e),document.querySelector(".current").classList.remove("current"),c.refs.allCategories.classList.add("current"),l.innerHTML='<h2 class="bookshelf-title">\n      Best Sellers <span class="bookshelf-title-accent">Books</span>\n    </h2>',window.scrollTo({top:0,behavior:"smooth"})}))})),c.refs.allCategories.addEventListener("click",(function(e){(0,r.getBestSellers)().then((function(e){i(e),l.innerHTML='<h2 class="bookshelf-title">\n  Best Sellers <span class="bookshelf-title-accent">Books</span>\n</h2>',document.querySelector(".current").classList.remove("current"),c.refs.allCategories.classList.add("current"),window.scrollTo({top:0,behavior:"smooth"})}))}));c=s("4Nugj");var p,f=s("fJh0j");r=s("dcWCw");p=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("ei4R3");var g;g=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("6hscl");var h;h=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("bvZ8I");var b;b=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("cYITP");var v;v=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("lqiqk");var m;m=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("9Som1");var k;k=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("ijrEh");var _;_=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("1jQa8");var y;y=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("aaRVJ");var L,E;function H(e){(0,r.getBookById)(e).then((function(t){var n,a,s,r,l,i,d,u,E;c.refs.modalBookInfo.innerHTML=(a=(n=t)._id,s=n.book_image,r=n.title,l=n.description,i=n.author,d=n.buy_links,'<div class="modal-wrapper"><button class="close-modalbtn js-close-modalbtn" aria-label="Close modal">\n  <svg class="popup-about-book__close-btn-iconbtn js-close-modalbtn" width="24" height="24"><use class="js-close-modalbtn" href="'.concat(o(L),'#icon-close"></use></svg></button>\n  \n  <div class=\'popup__wrapper\'>\n     <img class="popup__book-image" src="').concat(s,'" alt="cover" width="192" height="281">\n<div class="popup__text-content">\n  <h2 class="popup__book_title">').concat(r,'</h2>\n  <h3 class="popup__book_author">').concat(i,'</h3>\n  <p class="popup__book_description">').concat(l,'</p>\n  <ul class="popup__shopping-links-container">\n    <li>\n      <a href="').concat(d[0].url,'" target="blank" rel="nofollow noopener noreferrer" aria-label="Link to shop"\n        class="popup__shopping-links-icon">\n        <img src="').concat(o(p),'" srcset="').concat(o(g)," 2x, ").concat(o(h),' 3x" alt="Logo of shop" width="62">\n      </a>\n    </li>\n    <li>\n      <a href="').concat(d[1].url,'" target="blank" rel="nofollow noopener noreferrer" aria-label="Link to shop"\n        class="popup__shopping-links-icon">\n        <img src="').concat(o(b),'" srcset="').concat(o(v)," 2x, ").concat(o(m),' 3x" alt="Logo of shop" width="33">\n      </a>\n    </li>\n    <li>\n      <a href="').concat(d[2].url,'" target="blank" rel="nofollow noopener noreferrer" aria-label="Link to shop"\n        class="popup__shopping-links-icon">\n        <img src="').concat(o(k),'" srcset="').concat(o(_)," 2x, ").concat(o(y),' 3x" alt="Logo of shop" width="30">\n                  </a>\n    </li>\n  </ul>\n</div>\n</div>\n<button type="button" data-id ="').concat(a,'"class="add-bookBtn" >Add to shopping list</button>\n</div>')),u=e,(null!==(E=JSON.parse(localStorage.getItem(f.common.KEY_SHOPPING)))&&void 0!==E?E:[]).includes(u)?document.querySelector(".add-bookBtn").textContent="remove from the shopping list":document.querySelector(".add-bookBtn").textContent="add to the shopping list"}))}L=s("aNJCr").getBundleURL("EVgbq")+s("iE7OH").resolve("gwbLm"),null===(E=c.refs.categoryBookshelf)||void 0===E||E.addEventListener("click",(function(e){var o=e.target.closest(".bookshelf-book");o&&(H(o.getAttribute("id")),modal.style.display="block")})),c.refs.modal.addEventListener("click",(function(e){e.target.classList.contains("js-close-modalbtn")&&(c.refs.modalBookInfo.innerHTML="",modal.style.display="none")})),window.addEventListener("click",(function(e){e.target===modal&&(modal.style.display="none",c.refs.modalBookInfo.innerHTML="")})),document.addEventListener("keydown",(function(e){"Escape"===e.key&&(modal.style.display="none",c.refs.modalBookInfo.innerHTML="")})),c.refs.modal.addEventListener("click",(function(e){if(e.target.classList.contains("add-bookBtn")){var o,t=e.target.dataset.id,n=null!==(o=JSON.parse(localStorage.getItem(f.common.KEY_SHOPPING)))&&void 0!==o?o:[];if(n.includes(t)){var a=n.findIndex((function(e){return e===t}));n.splice(a,1),document.querySelector(".add-bookBtn").textContent="add to the shopping list",localStorage.setItem(f.common.KEY_SHOPPING,JSON.stringify(n))}else{n.push(t),document.querySelector(".add-bookBtn").textContent="remove from the shopping list",localStorage.setItem(f.common.KEY_SHOPPING,JSON.stringify(n))}}}));var w=document.querySelector(".scroll-btn");w.addEventListener("click",(function(){window.scrollTo({top:0,behavior:"smooth"})})),document.addEventListener("scroll",(function(){window.scrollY>100?w.classList.add("show-scroll-btn"):w.classList.remove("show-scroll-btn")}))}();
//# sourceMappingURL=index.6dafbd1c.js.map
